@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    #menu-home-receipts {
        background-color: #eb9a15;
    }
    #master-loader {
        background: url("../Images/loader.gif") no-repeat scroll center center #FFF;
        position: absolute;
        height: 30%;
        width: 85%;
    }
    #master-loader-list {
        background: url("../Images/loader.gif") no-repeat scroll center center #FFF;
        width: 98%;
        height: 500px;
        /*position: absolute;*/
    }
    #master-loader-edit {
        background: url(../Images/loader.gif) no-repeat scroll center center #FFF;
        /* position: absolute; */
        height: 100px;
        width: 90%;
    }
</style>
<div id="master-loader" class="fa hide">
</div>
<div id="master-loader-edit" class="fa hide">
</div>
<div class="inner-block">
    <div class="blank">
        <div id="ContainerAddOrUpdate"></div>
        <div class="row" id="ContainerList"></div>
        <input type="hidden" id="IsAllowAdd" value="@ViewBag.IsAdd" />
    </div>
</div>

	<div id="receiptModal" class="modal fade" role="dialog">											
												
	    <div class="modal-dialog tca-modal-md" id="PrintContainer" style="background-color: white;">											
	        @*@Html.Partial("Contract/_ContractDetails")*@											
												
	    </div>	
    </div>										


<script>
    $(document).ready(function () {
        $("#TopNavBarFilter").empty();
        getReceipt();
    });
    IsAddAllow();
    function IsAddAllow() {
        var isAllow = $("#IsAllowAdd").val();
        if (isAllow == 1)
            $("#ContainerAddOrUpdate").show();
        else
            $("#ContainerAddOrUpdate").hide();
    }
    
    function getReceiptAddorUpdate() {
        $.ajax(
       {
           url: "../Receipts/AddOrUpdate",
           type: "Get",
           data: {},
           //contentType: "application/json",
           //processData: false,
           success: function (html) {
               $("#ContainerAddOrUpdate").html(html);
           },
           error: function (jqXhr, textStatus, errorThrown) {
               //alert("Error '" + jqXhr.status + "' (textStatus: '" + textStatus + "', errorThrown: '" + errorThrown + "')");
               $("#masterResultModal").contents().find(".modal-header").removeClass("result-modal-success");
               $("#masterResultModal").contents().find(".modal-header").addClass("result-modal-error");
               $(".result-title").text("Failure");
               $(".result-modal-body span").text(masterResultError);
               $('#masterResultModal').modal('show');
           },
           complete: function () {
               //$("#img-loader").addClass("hide");
               $("#master-loader").addClass("hide");
           }
       });
    }
    function getReceipt() {
         
        getReceiptAddorUpdate();
        //$("#img-loader").removeClass("hide");
        //$("#master-loader").removeClass("hide");
        $("#ContainerAddOrUpdate").empty();
        $("#ContainerList").empty();
       
        //$("#img-loader").removeClass("hide");
        $("#master-loader").removeClass("hide");
        $.ajax(
        {
            url: "../Receipts/List",
            type: "Get",
            data: {},
            //contentType: "application/json",
            //processData: false,
            success: function (html) {
                $("#ContainerList").html(html);
            },
            error: function (jqXhr, textStatus, errorThrown) {
                //alert("Error '" + jqXhr.status + "' (textStatus: '" + textStatus + "', errorThrown: '" + errorThrown + "')");
                $("#masterResultModal").contents().find(".modal-header").removeClass("result-modal-success");
                $("#masterResultModal").contents().find(".modal-header").addClass("result-modal-error");
                $(".result-title").text("Failure");
                $(".result-modal-body span").text(masterResultError);
                $('#masterResultModal').modal('show');
            },
            complete: function () {
                //$("#img-loader").addClass("hide");
                $("#master-loader").addClass("hide");
            }
        });
    };
</script>

